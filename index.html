<!doctype html>
<html lang="uk">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Furry ‚Äî –ø–æ—à—É–∫ –ø–æ—Ä—É—à–µ–Ω—å —ñ –ø–æ–∫–∞—Ä–∞–Ω—å</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root { color-scheme: dark light; }
    html, body { height: 100%; margin: 0; }
    html { scroll-behavior: smooth; }
    body {
      background: url("https://i.postimg.cc/SNGLN9rY/photo-2025-09-14-23-48-14.jpg") no-repeat center center fixed;
      background-size: cover;
    }
    .bg-overlay {
      background: rgba(10, 22, 41, 0.60);
      border-radius: 1rem;
      padding: 1.5rem;
    }
    .kbd{border:1px solid rgba(255,255,255,.2); padding:.1rem .4rem; border-radius:.4rem; font-size:.8rem}
    .tag{border:1px solid rgba(255,255,255,.15); padding:.15rem .5rem; border-radius:999px; font-size:.75rem; white-space:nowrap}
    .mono{font-variant-numeric: tabular-nums}
    .pill{border-radius:999px}
    .safe-wrap{overflow-wrap:anywhere}
  </style>
</head>
<body class="text-slate-100">

  <!-- ======= –ú–ï–ù–Æ ======= -->
  <nav class="w-full mb-4">
    <ul class="flex gap-4 px-4 py-2 bg-slate-900/70 rounded-2xl justify-center">
      <li><button class="text-indigo-400 hover:text-indigo-300 font-semibold menu-btn" data-content="home">–ì–æ–ª–æ–≤–Ω–∞</button></li>
      <li><button class="text-slate-200 hover:text-indigo-400 menu-btn" data-content="rules">–ü—Ä–∞–≤–∏–ª–∞</button></li>
      <li><button class="text-slate-200 hover:text-indigo-400 menu-btn" data-content="faq">FAQ</button></li>
      <li><button class="text-slate-200 hover:text-indigo-400 menu-btn" data-content="contacts">–ö–æ–Ω—Ç–∞–∫—Ç–∏</button></li>
      <li><button class="text-slate-200 hover:text-indigo-400 menu-btn" data-content="updates">–û–Ω–æ–≤–ª–µ–Ω–Ω—è</button></li>
    </ul>
  </nav>

  <!-- ======= –ú–û–î–ê–õ–¨–ù–ï –í–Ü–ö–ù–û ======= -->
  <div id="modalOverlay" class="fixed inset-0 flex items-center justify-center bg-black/80 z-50 hidden">
    <div id="modalContent" class="bg-slate-900 text-slate-100 rounded-2xl p-8 max-w-lg w-full text-left space-y-6 shadow-2xl"></div>
  </div>

  <div class="max-w-6xl mx-auto px-4 py-8 bg-overlay">
    <header class="mb-6">
      <h1 class="text-2xl md:text-3xl font-bold tracking-tight">üõ†Ô∏è Furry Helper</h1>
      <p class="text-slate-300 text-sm md:text-base mt-1">–®–≤–∏–¥–∫–∏–π –ø–æ—à—É–∫ –ø–æ –ø—Ä–∞–≤–∏–ª–∞–º —Ç–∞ –ø–æ–∫–∞—Ä–∞–Ω–Ω—è–º. –í–≤–µ–¥–∏ –∫–ª—é—á–æ–≤–µ —Å–ª–æ–≤–æ: <span class="kbd">dm</span>, [...]</p>
    </header>

    <section class="mb-6">
      <div class="flex flex-col md:flex-row gap-3 items-stretch md:items-center">
        <div class="relative flex-1">
          <input id="q" class="w-full bg-slate-900/60 border border-slate-800 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/30 outline-none rounded-2xl px-4 py-3 pr-10" placeholder="–ü–æ—à—É–∫ –ø–æ –ø–æ–∫–∞—Ä–∞–Ω–Ω—è—Ö, –∫–æ–¥–∞—Ö, —Å–∏–Ω–æ–Ω—ñ–º–∞—Ö..." />
          <svg class="w-5 h-5 absolute right-3 top-1/2 -translate-y-1/2 opacity-70 pointer-events-none" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="m21 21-5.2-5.2M17 10a7 7 0 1 1-14 0 7 7 0 0 1 14 0Z" />
          </svg>
        </div>
        <div class="flex gap-2">
          <button id="clearBtn" class="px-4 py-2 rounded-xl bg-slate-800 hover:bg-slate-700">–û—á–∏—Å—Ç–∏—Ç–∏</button>
          <button id="showAllBtn" class="px-4 py-2 rounded-xl bg-indigo-600 hover:bg-indigo-500">–ü–æ–∫–∞–∑–∞—Ç–∏ –≤—Å—ñ</button>
        </div>
      </div>
      <div class="text-xs text-slate-300 mt-2 flex flex-wrap gap-2">
        <span class="tag">–ü—ñ–¥–∫–∞–∑–∫–∞: —à—É–∫–∞–π —ñ –∑–∞ –∫–æ–¥–æ–º –ø—Ä–∞–≤–∏–ª–∞ ‚Äî <span class="mono">4.1.2</span>, <span class="mono">5.11</span></span>
        <span class="tag">–°–∏–Ω–æ–Ω—ñ–º–∏: ¬´–æ—Å–∫ –∞–¥–º—ñ–Ω–∞¬ª == ¬´–æ–±—Ä–∞–∑–∞ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ü—ñ—ó¬ª</span>
        <span class="tag">UPD –∑–∞—Å—Ç–æ—Å–æ–≤–∞–Ω—ñ (16.08, 28.08 —Ç–æ—â–æ)</span>
      </div>
    </section>

    <section id="stats" class="text-slate-300 text-sm mb-3"></section>
    <section id="results" class="grid grid-cols-1 md:grid-cols-2 gap-4"></section>
    
    <!-- ======= –ß–ò–õ–ö–ê / –ú–£–ó–ò–ö–ê ======= -->
    <section id="chill-music" class="mt-10 bg-slate-900/70 rounded-2xl p-6">
      <h2 class="text-xl font-bold mb-3">üé∂ –ß–∏–ª–∫–∞: –ó–Ω–∞–π–¥–∏ —Ç—Ä–µ–∫ –Ω–∞ Spotify</h2>
      <div class="flex gap-2 mb-2">
        <input id="musicQuery" class="w-full px-4 py-2 rounded-xl bg-slate-800 border border-slate-700 text-slate-100" placeholder="–í–≤–µ–¥–∏ –Ω–∞–∑–≤—É –∞–±–æ —Ñ—Ä–∞–∑—É (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥: –£ –Ω–æ—á—ñ)" />
        <button id="musicSearchBtn" class="px-4 py-2 bg-indigo-600 hover:bg-indigo-500 rounded-xl text-white">–ó–Ω–∞–π—Ç–∏</button>
      </div>
      <div id="musicResults" class="mt-3"></div>
      <div class="text-xs text-slate-400 mt-2">
        <span>–ü–æ—Ç—Ä—ñ–±–µ–Ω Spotify –∞–∫–∫–∞—É–Ω—Ç –¥–ª—è –ø—Ä–æ—Å–ª—É—Ö–æ–≤—É–≤–∞–Ω–Ω—è –ø–æ–≤–Ω–æ—ó –≤–µ—Ä—Å—ñ—ó —Ç—Ä–µ–∫—É. –í—ñ–¥–∫—Ä–∏—Ç–æ —á–µ—Ä–µ–∑ Spotify Embed.</span>
      </div>
    </section>
    <!-- ======= –ö–Ü–ù–ï–¶–¨ –ß–ò–õ–ö–ê / –ú–£–ó–ò–ö–ê ======= -->

    <footer class="mt-12 text-slate-500 text-xs">
      <div class="space-y-1">
        <p>–û—Å—Ç–∞–Ω–Ω—ñ –∑–º—ñ–Ω–∏ –≤–∫–ª—é—á–µ–Ω–æ: –ø—Ä–∞–≤–∫–∏ –¥–æ <span class="mono">3.10</span>, <span class="mono">3.30</span>, <span class="mono">3.31</span> (999+), –≤–∏–¥–∞–ª–µ–Ω–∏–π <span class="mono">...</span></p>
        <p>UI: –ü–µ—Ä–µ–≤—ñ—Ä—è–π—Ç–µ –æ—Ñ—ñ—Ü—ñ–π–Ω–∏–π –ø–æ—Ä—Ç–∞–ª Discord –¥–ª—è –∞–∫—Ç—É–∞–ª—å–Ω–∏—Ö –æ–Ω–æ–≤–ª–µ–Ω—å.</p>
      </div>
    </footer>
  </div>

  <script>
    // ====== –ú–û–î–ê–õ–¨–ù–ï –í–Ü–ö–ù–û ======
    const modalOverlay = document.getElementById('modalOverlay');
    const modalContent = document.getElementById('modalContent');

    const modalData = {
      home: `
        <h2 class="text-xl font-bold mb-2">–ì–æ–ª–æ–≤–Ω–∞</h2>
        <p>–í—ñ—Ç–∞—î–º–æ —É Furry Helper! –¢—É—Ç –º–æ–∂–Ω–∞ —à–≤–∏–¥–∫–æ –∑–Ω–∞–π—Ç–∏ –ø—Ä–∞–≤–∏–ª–∞ —Ç–∞ –ø–æ–∫–∞—Ä–∞–Ω–Ω—è. –°–∫–æ—Ä–∏—Å—Ç–∞–π—Å—è –ø–æ—à—É–∫–æ–º –≤–∏—â–µ.</p>
      `,
      rules: `
        <h2 class="text-xl font-bold mb-2">–ü—Ä–∞–≤–∏–ª–∞</h2>
        <p>–í—Å—ñ –∞–∫—Ç—É–∞–ª—å–Ω—ñ –ø—Ä–∞–≤–∏–ª–∞ —Ç–∞ –ø–æ–∫–∞—Ä–∞–Ω–Ω—è —à—É–∫–∞–π —á–µ—Ä–µ–∑ –ø–æ—à—É–∫ –≤–∏—â–µ.</p>
      `,
      faq: `
        <h2 class="text-xl font-bold mb-2">FAQ</h2>
        <ul class="list-disc pl-5 text-slate-300 text-sm">
          <li>–Ø–∫ —à—É–∫–∞—Ç–∏ –ø—Ä–∞–≤–∏–ª–æ? ‚Äî –í–≤–µ–¥—ñ—Ç—å —á–∞—Å—Ç–∏–Ω—É –Ω–∞–∑–≤–∏, –∫–æ–¥ –∞–±–æ —Å–∏–Ω–æ–Ω—ñ–º.</li>
          <li>–©–æ –æ–∑–Ω–∞—á–∞—î "Jail"? ‚Äî –¢–∏–º—á–∞—Å–æ–≤–µ —É–≤'—è–∑–Ω–µ–Ω–Ω—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞.</li>
          <li>–î–µ –≤–∑—è—Ç–∏ –ø–æ–≤–Ω–∏–π –ø–µ—Ä–µ–ª—ñ–∫? ‚Äî –í—Å—ñ –ø—Ä–∞–≤–∏–ª–∞ –¥–æ—Å—Ç—É–ø–Ω—ñ —á–µ—Ä–µ–∑ —Ü–µ–π —Å–∞–π—Ç, –æ—Ñ—ñ—Ü—ñ–π–Ω–∏–π Discord —Ç–∞ —Ñ–æ—Ä—É–º.</li>
        </ul>
      `,
      contacts: `
        <h2 class="text-xl font-bold mb-2">–ö–æ–Ω—Ç–∞–∫—Ç–∏</h2>
        <p class="text-slate-300 text-sm">–ó–≤–æ—Ä–æ—Ç–Ω—ñ–π –∑–≤'—è–∑–æ–∫:<br>
          Discord: <span class="mono">@artem_symy</span><br>
          Email: <span class="mono">furry1helper@gmail.com</span>
        </p>
      `,
      updates: `
        <h2 class="text-xl font-bold mb-2">–û–Ω–æ–≤–ª–µ–Ω–Ω—è 0.3</h2>
        <ul class="list-disc pl-5 text-slate-300 text-sm">
          <li>–î–æ–¥–∞–Ω–æ —è–∫—ñ—Ä–Ω—ñ —Å–µ–∫—Ü—ñ—ó –¥–ª—è –º–µ–Ω—é.</li>
          <li>–í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ —ñ–Ω–ø—É—Ç –ø–æ—à—É–∫—É.</li>
          <li>–ü–æ–∫—Ä–∞—â–µ–Ω–æ –≤–µ—Ä—Å—Ç–∫—É —Ç–∞ —á–∏—Ç–∞–±–µ–ª—å–Ω—ñ—Å—Ç—å.</li>
          <li>–ú–æ–¥–∞–ª–∫–∞ –ø–æ–∫–∞–∑—É—î –∞–∫—Ç—É–∞–ª—å–Ω—É –≤–µ—Ä—Å—ñ—é.</li>
        </ul>
      `
    };

    document.querySelectorAll('.menu-btn').forEach(btn => {
      btn.addEventListener('click', function() {
        const key = this.getAttribute('data-content');
        modalContent.innerHTML = modalData[key] + `<button class="mt-6 px-4 py-2 bg-indigo-600 hover:bg-indigo-500 rounded-xl w-full" id="closeModalBtn">–ó–∞–∫—Ä–∏—Ç–∏</button>`;
        modalOverlay.classList.remove('hidden');
        document.getElementById('closeModalBtn').onclick = () => modalOverlay.classList.add('hidden');
      });
    });
    modalOverlay.addEventListener('click', (e) => {
      if (e.target === modalOverlay) modalOverlay.classList.add('hidden');
    });

    // ====== –ü–û–®–£–ö (—è–∫ –±—É–ª–æ) ======
    const RULES = [
      // ... (—Ç–≤–æ—è –≤–µ–ª–∏–∫–∞ –±–∞–∑–∞ –ø—Ä–∞–≤–∏–ª, –Ω–µ –º—ñ–Ω—è–≤)
    ];

    const DATA = RULES.map((r, i) => ({
      ...r,
      _id: i + 1,
      hay: [r.code, r.title].concat(r.aliases || []).concat((r.text || "").split(/[^\p{L}\p{N}_]+/u)).join(" ").toLowerCase()
    }));

    const elQ = document.getElementById('q');
    const elResults = document.getElementById('results');
    const elStats = document.getElementById('stats');
    const elClear = document.getElementById('clearBtn');
    const elShowAll = document.getElementById('showAllBtn');

    function render(list){
      elResults.innerHTML = "";
      if(!list.length){
        elStats.innerHTML = "–ù—ñ—á–æ–≥–æ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ. –°–ø—Ä–æ–±—É–π —ñ–Ω—à–∏–π –∑–∞–ø–∏—Ç –∞–±–æ —Å–∏–Ω–æ–Ω—ñ–º.";
        return;
      }
      elStats.innerHTML = `–ó–Ω–∞–π–¥–µ–Ω–æ <b>${list.length}</b> –ø—É–Ω–∫—Ç(—ñ–≤).`;
      const frag = document.createDocumentFragment();
      list.forEach(item => {
        const card = document.createElement('div');
        card.className = "rounded-2xl border border-slate-800 bg-slate-900/50 p-4 hover:border-indigo-600 transition-colors";
        card.innerHTML = `
          <div class="flex items-center justify-between mb-2 gap-2">
            <div class="flex items-center gap-2">
              <span class="px-2 py-1 pill bg-slate-800 text-slate-200 text-xs mono">${item.code}</span>
              <h3 class="font-semibold text-base safe-wrap">${escapeHTML(item.title)}</h3>
            </div>
          </div>
          <p class="text-slate-400 text-sm safe-wrap">${escapeHTML(item.text || "")}</p>
          <p class="text-indigo-400 text-sm safe-wrap mt-1"><b>–ü–æ–∫–∞—Ä–∞–Ω–Ω—è:</b> ${escapeHTML(item.punishment || "")}</p>
        `;
        frag.appendChild(card);
      });
      elResults.appendChild(frag);
    }

    function escapeHTML(s){ return s.replace(/[&<>"']/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c])); }

    function search(q){
      q = q.toLowerCase();
      return DATA.filter(d => d.hay.includes(q));
    }

    elQ.addEventListener('input', ()=> render(search(elQ.value)));
    elClear.addEventListener('click', ()=> { elQ.value=''; render([]); });
    elShowAll.addEventListener('click', ()=> render(DATA));
    render([]);

    // ====== –ú–£–ó–ò–ß–ù–ò–ô –ü–û–®–£–ö (Spotify) ======
const musicQueryEl = document.getElementById('musicQuery');
const musicSearchBtn = document.getElementById('musicSearchBtn');
const musicResultsEl = document.getElementById('musicResults');

// —Ç–µ–ø–µ—Ä –º–∏ —Å—Ç—É–∫–∞—î–º–æ—Å—å –Ω–µ –≤ —Å–∞–º Spotify, –∞ —É –Ω–∞—à –±–µ–∫–µ–Ω–¥
async function searchSpotifyTrack(query) {
  try {
    const res = await fetch(`/api/search?q=${encodeURIComponent(query)}`);
    if (!res.ok) {
      musicResultsEl.innerHTML = '–ü–æ–º–∏–ª–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ üò•';
      return [];
    }
    const data = await res.json();
    return data.items || [];
  } catch (e) {
    musicResultsEl.innerHTML = '–ú–µ—Ä–µ–∂–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ –∞–±–æ —Å–µ—Ä–≤–µ—Ä —É–ø–∞–≤.';
    return [];
  }
}

function showSpotifyEmbed(trackId) {
  return `<iframe style="border-radius:12px" src="https://open.spotify.com/embed/track/${trackId}"
    width="100%" height="80" frameborder="0" allow="autoplay; clipboard-write; encrypted-media; picture-in-picture"></iframe>`;
}

musicSearchBtn.onclick = async () => {
  const q = musicQueryEl.value.trim();
  if (!q) return;
  musicResultsEl.innerHTML = '–®—É–∫–∞—é...';
  const tracks = await searchSpotifyTrack(q);
  if (!tracks.length) {
    musicResultsEl.innerHTML = '–ù—ñ—á–æ–≥–æ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ üò•';
    return;
  }
  musicResultsEl.innerHTML = tracks.map(
    t => `<div class="mb-4">
      <div class="font-semibold text-slate-200">${t.name} ‚Äî <span class="text-slate-400">${t.artists.join(', ')}</span></div>
      ${showSpotifyEmbed(t.id)}
    </div>`
  ).join('');
};
  </script>
</body>
</html>
